# HTML画面の作成

ここではEコマースAPIを使うためのHTML画面の作成を行います。修正はすべて `public/ecommerce.html` の中に行っていきます。

## JavaScriptタグの追加

EコマースAPIを使う際には下記のJavaScriptタグを埋め込みます。これは `</body>` の上が良いでしょう。

```
  <!-- タグ追加ここから -->
  <script type="text/javascript" src="https://js.squareup.com/v2/paymentform"></script>
  <!-- タグ追加ここまで -->
  
  <script type="text/javascript" src="/vendors/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="/js/ecommerce.js"></script>
</body>
```

このタグはHTTPS、またはlocalhostでしか使えないようになっていますので注意してください。

## クレジットカード情報入力欄を追加

次にクレジットカード情報を入力する欄を作ります。この時、inputタグを使う必要はありません。後ほど追加するコードによってiframeタグに変換されます。これは商品情報の上に追加すれば良いでしょう。

```
<!-- 追加ここから -->
<div class="row">
  <div class="col-md-6">
    <div class="form-group">
      <label>カード番号</label>
      <div id="sq-card-number"></div>
    </div>
  </div>
  <div class="col-md-2">
    <div class="form-group">
      <label>CVC</label>
      <div id="sq-cvv"></div>
    </div>
  </div>
  <div class="col-md-2">
    <div class="form-group">
      <label>有効期限</label>
      <div id="sq-expiration-date"></div>
    </div>
  </div>
  <div class="col-md-2">
    <div class="form-group">
      <label>郵便番号</label>
      <div id="sq-postal-code"></div>
    </div>
  </div>
</div>
<!-- 追加ここまで -->

<p>
  <div class="row">
    <div class="col-md-3 col-md-offset-3">
      <img src="/img/reader.jpg" />
    </div>
    <div class="col-md-6">
      <strong>商品名：Squareリーダー</strong>
      <p>
        価格：5,000円
      </p>
    </div>
  </div>
</p>
```

## Squareから返却されるデータの保存先を追加

EコマースAPIをコールした結果、Squareからは下記の情報が返ってきます。

|キー|説明|例|
|----|----|----|
|card_brand|ブランド|VISA|
|last_4|カード番号の最後の4桁|1111|
|exp_month|有効期限（月）|11|
|exp_year|有効期限（年）|2016|
|billing_postal_code|郵便番号|94103|

これらを入れるための場所を作ります。すべてhiddenなのでボタンの上に追加で良いでしょう。

```
<!-- 追加ここから -->
<input type="hidden" name="nonce">
<input type="hidden" name="card_brand">
<input type="hidden" name="last_4">
<input type="hidden" name="exp_month">
<input type="hidden" name="exp_year">
<input type="hidden" name="billing_postal_code">
<!-- 追加ここまで -->

<button type="submit" class="btn btn-primary">注文する</button>
```

----

ここまででHTML画面の修正は完了です。続いて[JavaScriptの処理](./3-3.md)を作っていきます。
